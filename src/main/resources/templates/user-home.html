<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>GoBus - Book Your Bus Tickets</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
         
        body {
            margin: 0;
             font-family: "Poppins", sans-serif;
  font-weight: 100;
  font-style: normal;
            background: #f7f7f7;
        }
        .navbar {
           background: linear-gradient(135deg, #4e54c8, #8f94fb);
            color: #fff;
            padding: 0 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 75px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .navbar .logo {
            font-size: 2rem;
            font-weight: bold;
            letter-spacing: 2px;
        }
        .navbar .nav-links {
            display: flex;
            gap: 24px;
            align-items: center;
        }
        .navbar .nav-links a, .navbar .nav-links form {
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            padding: 8px 18px;
            border-radius: 4px;
            transition: background 0.2s;
            background: none;
            border: none;
            display: inline-block;
        }
        .navbar .nav-links a:hover, .navbar .nav-links form button:hover {
            background: #4e54c8;
            cursor: pointer;
        }
        .navbar .nav-links form {
            margin: 0;
            padding: 0;
            display: inline;
        }
        .navbar .nav-links form button {
            background: none;
            color: #fff;
            border: none;
            font-size: 1rem;
            padding: 8px 18px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat;
            color: #fff;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 12px;
        }
        .hero p {
            font-size: 1.3rem;
            margin-bottom: 32px;
        }
        .search-box {
            background: rgba(255,255,255,0.95);
            padding: 24px 32px;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
            display: flex;
            gap: 16px;
            align-items: center;
        }
        .search-box input, .search-box button {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
        }
        .search-box input {
            width: 160px;
            background: #f1f1f1;
        }
        .search-box button {
            background: #4e54c8;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }
        .search-box button:hover {
            background: #272d9f
        }
         .section {
      padding: 40px 20px;
      text-align: center;
    }
    .section h2 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
    .features, .routes, .reviews {
      display: flex;
      gap: 24px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .card {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 5px 8px rgba(0,0,0,0.1);
      width: 250px;
      transition: 0.3s;
    }
    .card h3 {
      margin-top: 0;
    }
    .footer {
  background: #4e54c8;
  color: white;
  text-align: center;
  padding: 16px;
  font-size: 0.95rem;
}

        @media (max-width: 700px) {

            .navbar {
                flex-direction: column;
                height: auto;
                padding: 16px;
            }
            .hero h1 {
                font-size: 2rem;
            }
            .search-box {
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }
            .search-box input {
                width: 100%;
            }
        }
        .card:hover{
           transform: translateY(-5px);
          
           
        }
        .popup {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #6b63ff;
            color: #ffffff;
            padding: 18px 36px;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(44, 130, 201, 0.18);
            font-size:small;
            z-index: 9999;
            animation: fadeout 2.5s forwards;
        }
        @keyframes fadeout {
            0% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
  <div class="popup" id="messageDiv" th:if="${session.pass!=null || session.fail!=null}">
                <h2 style="color: rgb(255, 255, 255);" th:text="${username}"></h2>
                <h2 style="color: red;" th:text="${session.fail}"></h2>
                <span th:text="${@messageRemover.remove()}"></span>
</div>
    <nav class="navbar">
        <div class="logo"><img style="position: relative;  top:8px; left: 20px;" height="120px" width="200px" src="/img/gobus.png" alt=""></div>
        <div class="nav-links">
            <a href="#">Home</a>
            <a href="/user/bookings">Bookings</a>
            <a href="/contact">Contact</a>
            <a href="#">Hi👋-<span th:text="${username}">username</span>!</a>
            <form action="/logout" method="post" style="display:inline;">
                <button type="submit">Logout</button>
            </form>
        </div>
    </nav>
    <section class="hero">
        <h1>Book Bus Tickets Easily</h1>
        <p>Fast, safe, and comfortable journeys. Find and book your bus tickets online!</p>
        <form class="search-box" action="/user/search" method="post">
            <input type="text" name="BoardingPoint" placeholder="From" required>
            <input type="text" name="DropPoint" placeholder="To" required>
            <input type="date" name="date" required>
            <button type="submit">Search Buses</button>
        </form>
    </section>
    
  <section class="section">
    <h2>Why Book With GoBus?</h2>
    <div class="features">
      <div class="card">
        <img src="/img/24-7 support.png" width="200px"styles="border-radius:10px;" alt="">
        <h3>24/7 Customer Support</h3>
        <p>Get assistance any time for your bookings.</p>
      </div>
      <div class="card">
        <img src="/img/livetracking.png"width="200px" alt="">
        <h3>Live Bus Tracking</h3>
        <p>Track your bus in real time from your mobile.</p>
      </div>
      <div class="card">
        <img src="/img/easy-cancel.png" width="200px" alt="">
        <h3>Easy Cancellation</h3>
        <p>Change of plans? Cancel or reschedule easily.</p>
      </div>
    </div>
  </section>

  <section class="section">
    <h2>Popular Routes</h2>
    <div class="routes">
      <div class="card">
        <img src="/img/bus1.png" width="200px" height="200px" alt="">
        <h3>Chennai ↔ Bangalore</h3>
        <p>15+ Buses Available Daily</p>
      </div>
      <div class="card">
          <img src="/img/bus2.png" width="200px" height="200px" alt="">
        <h3>Madurai ↔ Chennai</h3>
        <p>20+ Luxury Coaches</p>
      </div>
      <div class="card">
          <img src="/img/bus1.png" width="200px" height="200px" alt="">
        <h3>Coimbatore ↔ Hyderabad</h3>
        <p>Overnight Sleeper Services</p>
      </div>
    </div>
  </section>

  <section class="section">
    <h2>What Our Customers Say</h2>
    <div class="reviews">
      <div class="card">
        <img src="/img/female1.webp" width="200px" height="200px" alt="">
        <h3 style="color: gold;">★★★★★</h3>
        <p>"Smooth booking and safe journey. Highly recommended!"</p>
        <small>- Priya, Chennai</small>
      </div>
      <div class="card">
        <img src="/img/male.png" width="200px" height="200px" alt="">
        <h3 style="color: gold;">★★★★★</h3>
        <p>"Easy to track my bus and great customer support."</p>
        <small>- Vikram, Bangalore</small>
      </div>
      <div class="card">
        <img src="/img/female2.png" width="200px" height="200px" alt="">
        <h3 style="color: gold;">★★★★☆</h3>
        <p>"Comfortable ride and good pricing."</p>
        <small>- Sneha, Coimbatore</small>
      </div>
    </div>
  </section>
  <footer class="footer">
  &copy; 2025 GoBus. All rights reserved.
</footer>
    <!-- 🚍 GoBus Chatbot -->
<div id="chatbot" class="chatbot">
  <button id="openChat" class="chat-toggle">💬 Chat</button>

  <div id="chatWindow" class="chat-window" style="display:none;">
    <div class="chat-header">
      <strong>GoBus Help</strong>
      <button id="closeChat" class="close-btn">✕</button>
    </div>

    <div id="chatMessages" class="messages"></div>

    <div class="chat-input">
      <input id="chatInput" type="text" placeholder="Ask about booking, cancel, ticket..." />
      <button id="chatSend">Send</button>
    </div>
  </div>
</div>

<style>
/* Position & toggle */
.chatbot { position: fixed; right: 18px; bottom: 18px; z-index: 9999; }
.chat-toggle { background:#4e54c8;color:#fff;padding:14px 18px;border-radius:50px;border:none;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,0.2);}
.chat-toggle:hover { opacity:0.9; }

/* Chat window */
.chat-window { width:320px; height:420px; background:#fff; border-radius:12px;
               box-shadow:0 12px 30px rgba(0,0,0,0.25); display:flex; flex-direction:column; }
.chat-header { padding:10px; background:#4e54c8; color:#fff; display:flex; justify-content:space-between; align-items:center; border-top-left-radius:12px;border-top-right-radius:12px;}
.chat-header .close-btn { background:transparent; border:none; color:white; font-size:16px; cursor:pointer; }

/* Messages */
.messages { flex:1; padding:12px; overflow:auto; background:#f7f9fc;}
.msg { margin-bottom:10px; }
.msg.user { text-align:right;}
.msg .bubble { display:inline-block; padding:8px 12px; border-radius:12px; max-width:85%; font-size:14px; line-height:1.4; }
.msg.user .bubble { background:#007bff; color:white; border-bottom-right-radius:2px; }
.msg.bot .bubble { background:#eef2ff; color:#111; border-bottom-left-radius:2px; }

/* Input */
.chat-input { display:flex; padding:8px; gap:8px; border-top:1px solid #eee; }
.chat-input input { flex:1; padding:8px; border-radius:8px; border:1px solid #ddd; }
.chat-input button { padding:8px 12px; border-radius:8px; border:none; background:#4e54c8; color:#fff; cursor:pointer; }
.chat-input button:hover { opacity:0.9; }
</style>

<script>
const openBtn = document.getElementById("openChat");
const closeBtn = document.getElementById("closeChat");
const chatWindow = document.getElementById("chatWindow");
const sendBtn = document.getElementById("chatSend");
const input = document.getElementById("chatInput");
const messages = document.getElementById("chatMessages");

openBtn.addEventListener("click", () => chatWindow.style.display = "flex");
closeBtn.addEventListener("click", () => chatWindow.style.display = "none");

function appendMessage(text, who="bot") {
  const wrapper = document.createElement("div");
  wrapper.className = "msg " + who;
  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.innerText = text;
  wrapper.appendChild(bubble);
  messages.appendChild(wrapper);
  messages.scrollTop = messages.scrollHeight;
}

// FAQ rules
function getBotReply(userMsg) {
  const msg = userMsg.toLowerCase();

  if (msg.includes("book")) {
    return "🚌 To book a ticket: Home → Select Routes and Date → Select Bus → Choose Seats → Enter Passenger Details → Confirm & Pay.";
  }
  if (msg.includes("Hi") || msg.includes("hello")) {
    return "👋 Hello! How can I assist you with your bus bookings today?";
  }
  if (msg.includes("cancel")) {
    return "❌ To cancel: Go to My Bookings → Select Booking → Click Cancel Booking.";
  }
  if (msg.includes("ticket")) {
    return "🎫 To view your ticket: Go to My Bookings → Click View Ticket.";
  }
  if (msg.includes("refund")) {
    return "💰 Refunds are processed within 3–5 business days after successful cancellation.";
  }
  if (msg.includes("offer") || msg.includes("discount")) {
    return "🎉 Current Offer: Get 10% off on your first booking! Use code: WELCOME10";
  }
  if (msg.includes("contact") || msg.includes("help")) {
    return "☎️ For help: Visit Contact page or call our support number: 1800-123-456.";
  }

  return "🤖 Sorry, I can only help with booking, cancellation, tickets, refunds, offers, and support.";
}

function sendMessage() {
  const text = input.value.trim();
  if (!text) return;
  appendMessage(text, "user");
  input.value = "";

  // bot response after a small delay
  setTimeout(() => {
    const reply = getBotReply(text);
    appendMessage(reply, "bot");
  }, 500);
}

sendBtn.addEventListener("click", sendMessage);
input.addEventListener("keydown", e => { if (e.key==="Enter") sendMessage(); });

// Greet when opened
appendMessage("👋 Hi! I'm GoBus Assistant.", "bot");
</script>

</body>
</html>
